version: '3'
services:
  discovery:
    image: szmengran/cloud-discovery-eureka
    ports:
     - "8761:8761"
  configserver:
    image: szmengran/cloud-config-server
    environment:
      - EUREKA_SERVER_ADDRESS=http://discovery:8761/eureka
      - GITLAB_USERNAME=$GITLAB_USERNAME
      - GITLAB_PASSWORD=$GITLAB_PASSWORD
    ports:
     - "10001:10001"
  gateway:
    image: szmengran/cloud-gateway-zuul
    environment:
      - EUREKA_SERVER_ADDRESS=http://discovery:8761/eureka
      - CONFIG_SERVER_ADDRESS=http://configserver:10001
      - ENVIRONMENT=dev
    ports:
     - "10000:10000"
  oauth:
    image: szmengran/cloud-security-oauth
    environment:
      - EUREKA_SERVER_ADDRESS=http://discovery:8761/eureka
      - CONFIG_SERVER_ADDRESS=http://configserver:10001
      - ENVIRONMENT=dev
    ports:
     - 10002:10002